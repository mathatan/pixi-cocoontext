!function t(e,i,s){function o(r,h){if(!i[r]){if(!e[r]){var a="function"==typeof require&&require;if(!h&&a)return a(r,!0);if(n)return n(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return o(i?i:t)},l,l.exports,t,e,i,s)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<s.length;r++)o(s[r]);return o}({1:[function(t,e,i){e.exports=PIXI.cocoontext={CocoonText:t("./CocoonText"),CONST:t("./CocoonTextUtil")}},{"./CocoonText":2,"./CocoonTextUtil":3}],2:[function(t,e,i){function s(t,e,i){this.canvas=null,this.context=null,this.resolution=i||o.TEXT_RESOLUTION||PIXI.RESOLUTION,this._text=null,this._style=null,this._pixiId=t+JSON.stringify(e)+this.resolution;var s=PIXI.utils.BaseTextureCache[this._pixiId];"undefined"==typeof s?(this.canvas=document.createElement("canvas"),this.canvas._pixiId=this._pixiId,this.cacheDirty=!0):(this.canvas=s.source,this.cacheDirty=!1),this.context=this.canvas.getContext("2d");var n=PIXI.Texture.fromCanvas(this.canvas);n.trim=new PIXI.Rectangle,PIXI.Sprite.call(this,n),this.text=t,this.style=e,this.switchNeeded=!1}var o=t("../CocoonTextUtil");s.prototype=Object.create(PIXI.Sprite.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(t){this.scale.x=t/this._texture._frame.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(t){this.scale.y=t/this._texture._frame.height,this._height=t}},style:{get:function(){return this._style},set:function(t){var e=this._style,i=i||{};t instanceof PIXI.TextStyle?this._style=t:this._style=new PIXI.TextStyle(i),(e!==this._style||this._style.styleID!==this._styleID)&&(this._styleID=this._style.styleID,null!==this._style&&this.prepareUpdateText(this._text,this._style),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(null!==this._text&&this.prepareUpdateText(t,this._style),this._text=t,this.dirty=!0)}}}),s.prototype.prepareUpdateText=function(t,e){this._pixiId=t+JSON.stringify(e)+this.resolution,this.switchNeeded=!0};var n={};s.prototype.switchCanvas=function(){var t,e=PIXI.utils.BaseTextureCache[this._pixiId];e?(this.canvas=e.source,this.context=this.canvas.getContext("2d"),"undefined"!=typeof n[this._pixiId]?t=n[this._pixiId]:(t=PIXI.Texture.fromCanvas(this.canvas),t.trim=new PIXI.Rectangle,n[this._pixiId]=t),this.cacheDirty=!1):(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas._pixiId=this._pixiId,t=PIXI.Texture.fromCanvas(this.canvas),t.trim=new PIXI.Rectangle,n[this._pixiId]=t,this.cacheDirty=!0),this.texture=t,this._texture=t,this.switchNeeded=!1},s.prototype.updateText=function(){if(this.switchNeeded&&this.switchCanvas(),this.cacheDirty){var t=this._style,e="number"==typeof t.fontSize?t.fontSize*this.resolution+"px":t.fontSize,i=t.fontStyle+" "+t.fontVariant+" "+t.fontWeight+" "+e+" "+t.fontFamily;this.context.font=i;for(var s=t.wordWrap?this.wordWrap(this._text):this._text,o=s.split(/(?:\r\n|\r|\n)/),n=new Array(o.length),r=0,h=this.determineFontProperties(t),a=0;a<o.length;a++){var c=this.context.measureText(o[a]).width;n[a]=c,r=Math.max(r,c)}var l=r+t.strokeThickness*this.resolution;t.dropShadow&&(l+=t.dropShadowDistance*this.resolution),this.canvas.width=l+this.context.lineWidth;var d=this.style.lineHeight*this.resolution||h.fontSize+t.strokeThickness*this.resolution,u=d*o.length;t.dropShadow&&(u+=t.dropShadowDistance*this.resolution),this.canvas.height=u+2*t.padding*this.resolution,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),e="number"==typeof t.fontSize?t.fontSize*this.resolution+"px":t.fontSize,i=t.fontStyle+" "+t.fontVariant+" "+t.fontWeight+" "+e+" "+t.fontFamily,this.context.font=i,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit;var p,x;if(t.dropShadow){var f=t.dropShadowColor;"object"==typeof f&&(f=this.gradientFill(f,l,d+t.strokeThickness*this.resolution+t.dropShadowDistance*this.resolution));var y=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,v=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;this.context.shadowColor=f,this.context.shadowOffsetX=y,this.context.shadowOffsetY=v,t.dropShadowBlur&&(this.context.shadowBlur=t.dropShadowBlur*this.resolution*2)}else this.context.shadowColor=void 0;var g=t.stroke;"object"==typeof g&&(g=this.gradientFill(g,l,d+t.strokeThickness*this.resolution)),this.context.strokeStyle=g,this.context.lineWidth=t.strokeThickness*this.resolution;var I=t.fill;for("object"==typeof I&&(I=this.gradientFill(I,l,d,t.strokeThickness*this.resolution+t.padding*this.resolution)),this.context.fillStyle=I,a=0;a<o.length;a++)if(p=t.strokeThickness*this.resolution/2,x=t.strokeThickness*this.resolution/2+a*d+h.ascent,"right"===t.align?p+=r-n[a]:"center"===t.align&&(p+=(r-n[a])/2),t.stroke&&t.strokeThickness&&this.context.strokeText(o[a],p,x+t.padding*this.resolution),t.fill&&this.context.fillText(o[a],p,x+t.padding*this.resolution),t.strikeThrough){var w=this.context.measureText(o[a]),T=Math.round(x-d/4+t.padding);this.context.fillRect(p,T,Math.round(w.width),2*this.resolution)}}this.updateTexture()},s.prototype.gradientFill=function(t,e,i,s){s=s||0,e+=s,i+=s;var o,n;o=n=s,t.vertical?(i=0,n=0):(e=0,o=0);var r,h,a=this.context.createLinearGradient(o,n,e,i);if("undefined"!=typeof t.stops)for(r=0,h=t.stops.length;h>r;r++)a.addColorStop(t.stops[r].stop,t.stops[r].color);else for(r=0,h=t.stops.length;h>r;r++){var c=r/h;a.addColorStop(c,t.stops[r])}return a},s.prototype.blur=function(t,e,i){var s=0,o=0,n=document.createElement("canvas"),r=n.getContext("2d");n.width=this.canvas.width,n.height=this.canvas.height,r.drawImage(this.canvas,0,0);var h=this.context.globalAlpha;this.context.globalAlpha=i/(4*t),this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(var a=0;4*t>a;++a){var c=a%4,l=(a+1)/4*this.resolution;switch(c){case 0:o-=l;break;case 1:s+=l;break;case 2:o+=l;break;case 3:s-=l}this.context.drawImage(n,s,o)}this.context.globalAlpha=h},s.prototype.updateTexture=function(){var t=this._texture;this.cacheDirty&&(t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution),t.orig.width=t._frame.width=this.canvas.width/this.resolution,t.orig.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=0,t.trim.width=t._frame.width,t.trim.height=t._frame.height,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,this.scale.x=1,this.scale.y=1,this.cacheDirty&&t.baseTexture.emit("update",t.baseTexture),this.dirty=!1,this.cacheDirty=!1},s.prototype.determineFontProperties=function(t){var e="number"==typeof t.fontSize?t.fontSize*this.resolution+"px":t.fontSize,i=t.fontStyle+" "+t.fontVariant+" "+t.fontWeight+" "+e+" "+t.fontFamily,s=PIXI.Text.fontPropertiesCache[i];if(!s){s={};var o=PIXI.Text.fontPropertiesCanvas,n=PIXI.Text.fontPropertiesContext;n.font=i;var r=Math.ceil(n.measureText("|MÉq").width),h=Math.ceil(n.measureText("M").width),a=2*h;h=1.2*h|0,o.width=r,o.height=a,n.fillStyle="#f00",n.fillRect(0,0,r,a),n.font=i,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,h);var c,l,d=n.getImageData(0,0,r,a).data,u=d.length,p=4*r,x=0,f=!1;for(c=0;h>c;c++){for(l=0;p>l;l+=4)if(255!==d[x+l]){f=!0;break}if(f)break;x+=p}for(s.ascent=h-c,x=u-p,f=!1,c=a;c>h;c--){for(l=0;p>l;l+=4)if(255!==d[x+l]){f=!0;break}if(f)break;x-=p}s.descent=c-h,s.fontSize=s.ascent+s.descent,PIXI.Text.fontPropertiesCache[i]=s}return s},s.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),s=this._style.wordWrapWidth*this.resolution,o=0;o<i.length;o++){for(var n=s,r=i[o].split(" "),h=0;h<r.length;h++){var a=this.context.measureText(r[h]).width,c=a+this.context.measureText(" ").width;0===h||c>n?(h>0&&(e+="\n"),e+=r[h],n=s-a):(n-=c,e+=" "+r[h])}o<i.length-1&&(e+="\n")}return e},s.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),PIXI.Sprite.prototype.renderWebGL.call(this,t)},s.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),PIXI.Sprite.prototype._renderCanvas.call(this,t)},s.prototype.getBounds=function(t){return this.dirty&&this.updateText(),PIXI.Sprite.prototype.getBounds.call(this,t)},s.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t?!0:t)}},{"../CocoonTextUtil":3}],3:[function(t,e,i){e.exports={TEXT_RESOLUTION:1}},{}]},{},[1]);