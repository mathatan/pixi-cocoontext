!function t(e,i,o){function r(s,h){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(n)return n(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return r(i?i:t)},l,l.exports,t,e,i,o)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,i){e.exports=PIXI.cocoontext={CocoonText:t("./CocoonText"),CONST:t("./CocoonTextUtil")}},{"./CocoonText":2,"./CocoonTextUtil":3}],2:[function(t,e,i){function o(t,e,i){this.canvas=null,this.context=null,this.resolution=i||r.TEXT_RESOLUTION||PIXI.RESOLUTION,this._text=null,this._style=null,this._generatedStyle=null,"undefined"!=typeof e.font&&(e.font=e.font.replace(/[0-9\.]+/,parseFloat(e.font.match(/[0-9\.]+/)[0]).toFixed(0))),"number"==typeof e.dropShadowAngle&&(e.dropShadowAngle=Math.round(1e3*e.dropShadowAngle)/1e3),"number"==typeof e.dropShadowBlur&&(e.dropShadowBlur=Math.round(1e3*e.dropShadowBlur)/1e3),"number"==typeof e.dropShadowDistance&&(e.dropShadowDistance=Math.round(1e3*e.dropShadowDistance)/1e3),"number"==typeof e.dropShadowStrength&&(e.dropShadowStrength=Math.round(1e3*e.dropShadowStrength)/1e3),"number"==typeof e.dropShadowStroke&&(e.dropShadowStroke=Math.round(1e3*e.dropShadowStroke)/1e3),"number"==typeof e.lineHeight&&(e.lineHeight=Math.round(1e3*e.lineHeight)/1e3),"number"==typeof e.miterLimit&&(e.miterLimit=Math.round(1e3*e.miterLimit)/1e3),"number"==typeof e.padding&&(e.padding=Math.round(1e3*e.padding)/1e3),"number"==typeof e.strokeThickness&&(e.strokeThickness=Math.round(1e3*e.strokeThickness)/1e3),"number"==typeof e.wordWrapWidth&&(e.wordWrapWidth=Math.round(1e3*e.wordWrapWidth)/1e3),this._pixiId=t+JSON.stringify(e)+this.resolution;var o=PIXI.utils.BaseTextureCache[this._pixiId];"undefined"==typeof o?(this.canvas=document.createElement("canvas"),this.canvas._pixiId=this._pixiId,this.cacheDirty=!0):(this.canvas=o.source,this.cacheDirty=!1),this.context=this.canvas.getContext("2d");var n=PIXI.Texture.fromCanvas(this.canvas);n.trim=new PIXI.Rectangle,PIXI.Sprite.call(this,n),this.text=t,this.style=e,this.switchNeeded=!1}var r=t("../CocoonTextUtil");o.prototype=Object.create(PIXI.Sprite.prototype),o.prototype.constructor=o,e.exports=o,Object.defineProperties(o.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(t){this.scale.x=t/this._texture._frame.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(t){this.scale.y=t/this._texture._frame.height,this._height=t}},style:{get:function(){return this._style},set:function(t){var e={};e.font=t.font||"bold 20px Arial",e.lineHeight="undefined"!=typeof t.lineHeight?t.lineHeight*this.resolution:void 0,e.fill=t.fill||"black",e.align=t.align||"left",e.stroke=t.stroke||"black",e.strokeThickness=t.strokeThickness||0,e.wordWrap=t.wordWrap||!1,e.wordWrapWidth=t.wordWrapWidth||100,e.dropShadow=t.dropShadow||!1,e.dropShadowColor=t.dropShadowColor||"#000000",e.dropShadowAngle=t.dropShadowAngle||Math.PI/6,e.dropShadowDistance=t.dropShadowDistance||5,e.dropShadowBlur=t.dropShadowBlur||0,e.dropShadowStrength=t.dropShadowStrength||1,e.dropShadowStroke=t.dropShadowStroke||0,e.padding=t.padding||0,e.textBaseline=t.textBaseline||"alphabetic",e.lineJoin=t.lineJoin||"miter",e.miterLimit=t.miterLimit||10;var i=JSON.stringify(this._generatedStyle);this._generatedStyle={font:(e.font||"").replace(/[0-9\.]+/,(parseFloat(e.font.match(/[0-9\.]+/)[0])*this.resolution).toFixed(0)),lineHeight:e.lineHeight,fill:e.fill,align:e.align,stroke:e.stroke,strokeThickness:Math.round(e.strokeThickness*this.resolution),wordWrap:e.wordWrap,wordWrapWidth:Math.round(e.wordWrapWidth*this.resolution),dropShadow:e.dropShadow,dropShadowColor:e.dropShadowColor,dropShadowAngle:e.dropShadowAngle,dropShadowDistance:Math.round(e.dropShadowDistance*this.resolution),dropShadowBlur:e.dropShadowBlur||0,dropShadowStrength:e.dropShadowStrength||1,dropShadowStroke:e.dropShadowStroke||0,padding:Math.round(e.padding*this.resolution),textBaseline:e.textBaseline,lineJoin:e.lineJoin,miterLimit:e.miterLimit},JSON.stringify(this._generatedStyle)!==i&&(null!==this._style&&this.prepareUpdateText(this._text,t),this._style=e,this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(null!==this._text&&this.prepareUpdateText(t,this._style),this._text=t,this.dirty=!0)}}}),o.prototype.prepareUpdateText=function(t,e){this._pixiId=t+JSON.stringify(e)+this.resolution,this.switchNeeded=!0},o.prototype.switchCanvas=function(){var t=PIXI.utils.BaseTextureCache[this._pixiId];t?(this.canvas=t.source,this.context=this.canvas.getContext("2d"),this.cacheDirty=!1):(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas._pixiId=this._pixiId,this.cacheDirty=!0);var e=PIXI.Texture.fromCanvas(this.canvas);e.trim=new PIXI.Rectangle,this.texture=e,this._texture=e,this.switchNeeded=!1},o.prototype.updateText=function(){if(this.switchNeeded&&this.switchCanvas(),this.cacheDirty){var t=this._generatedStyle;this.context.font=t.font;for(var e=t.wordWrap?this.wordWrap(this._text):this._text,i=e.split(/(?:\r\n|\r|\n)/),o=new Array(i.length),r=0,n=this.determineFontProperties(t.font),s=0;s<i.length;s++){var h=this.context.measureText(i[s]).width;o[s]=h,r=Math.max(r,h)}var a=r+t.strokeThickness;t.dropShadow&&(a+=t.dropShadowDistance),this.canvas.width=a+this.context.lineWidth;var d=this.style.lineHeight||n.fontSize+t.strokeThickness,l=d*i.length;t.dropShadow&&(l+=t.dropShadowDistance),this.canvas.height=l+2*t.padding,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit;var c,p;if(t.dropShadow){var u=t.dropShadowColor;"object"==typeof u&&(u=this.gradientFill(u,a,d+t.strokeThickness+t.dropShadowDistance)),this.context.fillStyle=u;var x=Math.cos(t.dropShadowAngle)*t.dropShadowDistance/this.resolution,f=Math.sin(t.dropShadowAngle)*t.dropShadowDistance/this.resolution;for(s=0;s<i.length;s++)c=t.strokeThickness/2,p=t.strokeThickness/2+s*d+n.ascent,"right"===t.align?c+=r-o[s]:"center"===t.align&&(c+=(r-o[s])/2),t.fill&&(t.dropShadowStroke&&(this.context.strokeStyle=u,this.context.lineWidth=t.dropShadowStroke/this.resolution),this.context.globalAlpha=t.dropShadowStrength,t.dropShadowStroke&&this.context.strokeText(i[s],c+x,p+f+t.padding),this.context.fillText(i[s],c+x,p+f+t.padding),this.context.globalAlpha=1,t.dropShadowBlur&&this.blur(2,t.dropShadowBlur,1))}var g=t.stroke;"object"==typeof g&&(g=this.gradientFill(g,a,d+t.strokeThickness)),this.context.strokeStyle=g,this.context.lineWidth=t.strokeThickness;var w=t.fill;for("object"==typeof w&&(w=this.gradientFill(w,a,d,t.strokeThickness+t.padding)),this.context.fillStyle=w,s=0;s<i.length;s++)c=t.strokeThickness/2,p=t.strokeThickness/2+s*d+n.ascent,"right"===t.align?c+=r-o[s]:"center"===t.align&&(c+=(r-o[s])/2),t.stroke&&t.strokeThickness&&this.context.strokeText(i[s],c,p+t.padding),t.fill&&this.context.fillText(i[s],c,p+t.padding)}this.updateTexture()},o.prototype.gradientFill=function(t,e,i,o){o=o||0,e+=o,i+=o;var r,n;r=n=o,t.vertical?(i=0,n=0):(e=0,r=0);for(var s=this.context.createLinearGradient(r,n,e,i),h=0,a=t.stops.length;a>h;h++)s.addColorStop(t.stops[h].stop,t.stops[h].color);return s},o.prototype.blur=function(t,e,i){var o=0,r=0,n=document.createElement("canvas"),s=n.getContext("2d");n.width=this.canvas.width,n.height=this.canvas.height,s.drawImage(this.canvas,0,0);var h=this.context.globalAlpha;this.context.globalAlpha=i/(4*t),this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(var a=0;4*t>a;++a){var d=a%4,l=(a+1)/4*this.resolution;switch(d){case 0:r-=l;break;case 1:o+=l;break;case 2:r+=l;break;case 3:o-=l}this.context.drawImage(n,o,r)}this.context.globalAlpha=h},o.prototype.updateTexture=function(){var t=this._texture;this.cacheDirty&&(t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution),t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-this._style.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,this.scale.x=1,this.scale.y=1,this.cacheDirty&&t.baseTexture.emit("update",t.baseTexture),this.dirty=!1,this.cacheDirty=!1},o.prototype.determineFontProperties=function(t){var e=PIXI.Text.fontPropertiesCache[t];if(!e){e={};var i=PIXI.Text.fontPropertiesCanvas,o=PIXI.Text.fontPropertiesContext;o.font=t;var r=Math.ceil(o.measureText("|MÉq").width),n=Math.ceil(o.measureText("M").width),s=2*n;n=1.2*n|0,i.width=r,i.height=s,o.fillStyle="#f00",o.fillRect(0,0,r,s),o.font=t,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText("|MÉq",0,n);var h,a,d=o.getImageData(0,0,r,s).data,l=d.length,c=4*r,p=0,u=!1;for(h=0;n>h;h++){for(a=0;c>a;a+=4)if(255!==d[p+a]){u=!0;break}if(u)break;p+=c}for(e.ascent=n-h,p=l-c,u=!1,h=s;h>n;h--){for(a=0;c>a;a+=4)if(255!==d[p+a]){u=!0;break}if(u)break;p-=c}e.descent=h-n,e.fontSize=e.ascent+e.descent,PIXI.Text.fontPropertiesCache[t]=e}return e},o.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),o=this._generatedStyle.wordWrapWidth,r=0;r<i.length;r++){for(var n=o,s=i[r].split(" "),h=0;h<s.length;h++){var a=this.context.measureText(s[h]).width,d=a+this.context.measureText(" ").width;0===h||d>n?(h>0&&(e+="\n"),e+=s[h],n=o-a):(n-=d,e+=" "+s[h])}r<i.length-1&&(e+="\n")}return e},o.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),PIXI.Sprite.prototype.renderWebGL.call(this,t)},o.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),PIXI.Sprite.prototype._renderCanvas.call(this,t)},o.prototype.getBounds=function(t){return this.dirty&&this.updateText(),PIXI.Sprite.prototype.getBounds.call(this,t)},o.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t?!0:t)}},{"../CocoonTextUtil":3}],3:[function(t,e,i){e.exports={TEXT_RESOLUTION:1}},{}]},{},[1]);